{% extends "base.html" %}

{% block title %}Search Results - Food Recipe System{% endblock %}

{% block content %}
<div class="container">
  <div class="search-header">
    <h1>Search Results: <span id="search-query">{{ query }}</span></h1>
    <p>Found <span class="results-count">{{ recipes|length }}</span> recipes</p>
  </div>
  
  <div class="recipe-grid" id="search-results-container">
    {% if recipes %}
      {% for recipe in recipes %}
        <div class="recipe-card">
          <img src="{{ url_for('static', filename=recipe.image) }}" alt="{{ recipe.title }}">
          <div class="recipe-content">
            <h3>{{ recipe.title }}</h3>
            <p>{{ recipe.description[:100] }}{% if recipe.description|length > 100 %}...{% endif %}</p>
            <div class="recipe-meta">
              <span><i class="far fa-clock"></i> {{ recipe.prep_time + recipe.cook_time }} mins</span>
              <span><i class="fas fa-chart-line"></i> {{ recipe.difficulty }}</span>
            </div>
            <a href="{{ url_for('recipe_detail', recipe_id=recipe.id) }}" class="btn">View Recipe</a>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p class="no-results">No recipes found matching your search.</p>
    {% endif %}
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('search-input');
    if (searchInput && "{{ query }}") {
      searchInput.value = "{{ query }}";
    }
  });
</script>
{% endblock %}